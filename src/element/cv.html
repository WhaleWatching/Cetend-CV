<!DOCTYPE html>
<link rel="import" href="../static/components/polymer/polymer.html">
<link rel="import" href="../static/components/core-ajax/core-ajax.html">
<link rel="import" href="../static/components/core-media-query/core-media-query.html">
<!-- smoosh -->
<link rel="stylesheet" href="cv.css" inline>
<script src="cv.js" inline></script>
<!-- endsmoosh -->

<polymer-element name="cv-global" hidden></polymer-element>

<polymer-element name="cv-source" hidden>
  <template>
    <cv-global id="cvGlobal"></cv-global>
    <core-ajax id="coreAjax" handleAs="json"></core-ajax>
  </template>
</polymer-element>

<polymer-element name="cv-side">
  <template>
    <style>
      :host(.desktop) {
        width: 240px;
      }
      :host(.desktop.wide) {
        width: 320px;
      }
      @media print {
        :host {
          display: none;
        }
      }
    </style>
  </template>
</polymer-element>

<polymer-element name="cv-holder">
  <template>
    <cv-global id="cvGlobal"></cv-global>
  </template>
</polymer-element>

<polymer-element name="cv-content" flex>
  <template>
    <style>
      @media screen {
        :host(.desktop) {
          overflow-y: scroll;
        }
      }
      .test {
        height: 400px;
        background-color: #333;
      }
      .test:nth-child(even) {
        background-color: #777;
      }
    </style>
    <cv-global id="cvGlobal"></cv-global>
    <div class="test">a</div>
    <div class="test">b</div>
    <div class="test">c</div>
    <div class="test">d</div>
    <div class="test">e</div>
    <div class="test">f</div>
    <div class="test">g</div>
  </template>
</polymer-element>

<polymer-element name="cv-polymer">
  <template>
    <style>
      .container.desktop {
        height: 100vh;
      }
    </style>
    <cv-global id="cvGlobal"></cv-global>
    <cv-source id="cvSource"></cv-source>
    <core-media-query id="mediaQueryPhoneScreen" query="max-width: 960px" queryMatches="{{phoneScreen}}"></core-media-query>
    <core-media-query id="mediaQueryPhoneScreen" query="min-width: 1367px" queryMatches="{{wideScreen}}"></core-media-query>
    <div class="container {{ {desktop: !phoneScreen} | tokenList}}" layout vertical?="{{phoneScreen}}" horizontal?="{{!phoneScreen}}">
      <cv-side id="cvSide" resolved="{{$.cvGlobal.global.resolved}}" class="{{ {mobile: phoneScreen, desktop: !phoneScreen, wide: wideScreen} | tokenList}}"></cv-side>
      <cv-content id="cvContent" resolved="{{$.cvGlobal.global.resolved}}" class="{{ {desktop: !phoneScreen} | tokenList}}"></cv-content>
    </div>
    <cv-holder id="cvHolder" hidden-condition="{{$.cvGlobal.global.resolved}}"></cv-holder>
  </template>
</polymer-element>